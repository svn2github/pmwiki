version=pmwiki-2.2.0-beta6 ordered=1 urlencoded=1
agent=Mozilla/5.0 (X11; U; Linux i686 (x86_64); en-US; rv:1.8.0.6) Gecko/20060728 SUSE/1.5.0.6-1.3 Firefox/1.5.0.6
author=Pm
csum=rephrase
ctime=1159592216
host=24.1.26.255
name=PmWiki.Blocklist
rev=4
targets=PmWiki.Passwords,PmWiki.PasswordsAdmin,Site.Blocklist,PmWiki.WikiAdministrator,PmWiki.Variables,PmWiki.PageVariables,PmWiki.DocumentationIndex
text=%25audience%25 administrators (basic)%0a%0aUnfortunately, the open-editability of many wiki systems often makes them attractive targets for "link spam" or "wikispam", in which links are added to pages in an effort to increase search engine rankings or drive traffic to other sites.  Also, many link spammers have developed automated systems to locate sites that accept visitor input and attempt to flood the site with unwanted links.%0a%0aBy far the best countermeasure against wikispam is to restrict editing through the use of passwords (see [[Passwords]] and [[Passwords Admin]]).  Experience has shown that passwords can be effective even if the password is widely known, and even if the password is publicly available on the site itself.  However, there are many cases where passwording may be an impediment, so these will generally want to use some form of blocklist.%0a%0a!! Blocklist basics%0a%0aA ''blocklist'' is a list of IP addresses, phrases, and expressions which are prevented from being added into pages on the website.  PmWiki is distributed with a built-in blocklisting capability; blocklists can be enabled by adding the following line to ''local/config.php'':%0a%0a    $EnableBlocklist = 1;%0a%0aThis tells PmWiki to scan the [[Site.Blocklist]] page (and possibly other pages -- see below) looking for phrases and IP addresses to be excluded from posting to the site.%0a%0aBlocking by word or phrase: The simplest form of block is simply a line containing "[@block:@]" followed by a word or phrase to be excluded from postings.  For example, a line like %0a    block: spam.com %0ain Site.Blocklist will block any posts containing the string "spam.com" (case-insensitive) anywhere in the post.%0a%0aBlocking by IP address:  Sometimes we wish to restrict posts coming from particular addresses or address ranges that are known as sources of wikispam.  If a blocklist page contains IP addresses of the form "a.b.c.d" or "a.b.c.*", then any posts coming from that address or range will be blocked.%0a%0aBlocking by regular expression or pattern:  Blocking on simple words can sometimes pose difficulties; for example, a simple "[@block: cialis@]" entry will also block the word "specialist".  For these cases it's often helpful to use a regular expression, as in:%0a%0a    block: /\bcialis\b/%0a%0aThis says to block "cialis" only if it doesn't occur in the middle of a larger word.  The leading slash (/) after "block:" tells PmWiki to use a regular expression match instead of a simple string match.  (Blocklist uses PCRE or "Perl Compatible Regular Expressions"; see http://www.php.net/manual/en/ref.pcre.php for more information.)%0a%0a%0a!! Letting authors know why they've been blocked%0a%0aBy default, blocklist only tells an author that a particular edit has been blocked, but doesn't give a specific reason for the blocking (e.g., the offending phrase).  Setting the following in a local customization file will also provide the reasons for the block:%0a%0a    $EnableWhyBlocked = 1;%0a%0a%0a!! Managing multiple blocklists%0a%0aPmWiki allows blocklist entries to come from multiple pages by setting the $BlocklistPages variable.  By default $BlocklistPages is set to "Site.Blocklist", as well as any automatically downloaded blocklists as described below.  Setting a value of $BlocklistPages changes the default:%0a%0a    $BlocklistPages = array('Main.Blocklist', '{$Group}.Blocklist');%0a%0a%0a!! Automatically downloaded blocklists%0a%0aMaintaining blocklists is relatively easy to do, but can become tedious over time.  Several groups have formed and maintain "shared blocklists", where a common blocklist is made available to all.  PmWiki's blocklist capability has built-in features for automatically downloading and updating such shared blocklists.%0a%0aIf you're just in a hurry to make use of some standard blocklists, make the following setting in ''local/config.php'':%0a%0a    $EnableBlocklist = 10;%0a%0aThis tells PmWiki to not only enable blocklists on the site, but to also configure itself to automatically retrieve and maintain local copies of well-known blocklists such as chongqed.org and MoinMaster.  These local copies will be saved in Site.Blocklist-Chonged and Site.Blocklist-MoinMaster and refreshed once per day (as determined by the value of $BlocklistDownloadRefresh).%0a%0aFor detailed configuration of automatically downloaded blocklists, use the $BlocklistDownload array.  An entry for MoinMaster might look like:%0a%0a    $BlocklistDownload['Site.Blocklist-MoinMaster'] = array(%0a      'url' => 'http://moinmaster.wikiwikiweb.de/BadContent?action=raw',%0a      'format' => 'regex',%0a      'refresh' => 86400);%0a%0aThis says to download the blocklist data from the given url into the Site.Blocklist-MoinMaster page, that the entries in the blocklist are regular expressions, and to refresh the information every 86,400 seconds (one day).%0a%0aIf 'refresh' is omitted, then the page will be refreshed at the time interval given by $BlocklistDownloadRefresh (default one day).  If 'format' is omitted, the page is assumed to have PmWiki-formatted entries as described above.  If 'url' is omitted, then the blocklist information is downloaded from a standard location on the pmwiki.org site (not yet active).%0a%0aTo force a refresh of an automatically downloaded blocklist, simply delete the existing page -- a new version will be installed upon the next blocklist scan.%0a%0a%0a!! Ignoring specific entries in a blocklist (unblock)%0a%0aWhen using a large master blocklist or blocklists automatically refreshed from external sites, it may be that some entries in the blocklists are inappropriate or overeager and block legitimate content.  In this case a wikiadministrator can use "unblock" in a blocklist page to ignore an entry from the blocklist.  For example, to allow "spam.com" even if another blocklist has a block entry for it:%0a%0a    unblock: spam.com%0a%0aIn order for unblocking to work the phrase or pattern following "unblock:" must be exactly the same as the original.%0a%0a%0a!! Permissions on blocklist pages%0a%0aIn general, a [[(wiki )administrator]] will want to edit-protect the Site.Blocklist and any other blocklist pages to prevent arbitrary changes to the blocklist (see [[Passwords]]).  Since most pages in the Site.* group are edit-protected by default anyway, this usually isn't a problem.%0a%0aAdministrators may also wish to read-protect the various blocklist pages so that others do not know the exact phrases and/or IP addresses that are being blocked.  (Also, by their nature blocklists tend to contain phrases or terms that may be offensive or inappropriate to some.)%0a%0aAny pages created via automatic download (see above) are automatically locked against viewing except by administrators.  %0a%0a%0a!! Blocklist Variables%0a%0a%3c%3c|[[Variables]]|>>%0a%0aThe following variables help control the configuration and operation of blocklists:%0a%0a:$EnableBlocklist:If set to a non-zero value, then blocklists are enabled on the site.  If set to a value of ten or higher, then add entries for automatic downloads of standard blocklists.%0a        $EnableBlocklist = 1;              # enable blocklists%0a        $EnableBlocklist = 10;             # auto-configure standard blocklists%0a%0a:$EnableWhyBlocked:By default, authors are not told which particular phrases or IP addresses are causing a particular post to be blocked; setting $EnableWhyBlocked to 1 provides this information.%0a        $EnableWhyBlocked = 1;             # give reasons for blocking%0a%0a:$BlocklistPages:An array of pages to be checked for blocklist entries.  The elements of the array may contain [[page variables]].  Defaults to "Site.Blocklist", plus any other automatically downloaded blocklist pages.%0a%0a:$BlocklistMessageFmt:The message to provide the author whenever a post has been blocked.%0a%0a:$BlockedMessagesFmt:If $EnableWhyBlocked is set, defines the text to use for each type of block being performed.  Currently only 'ip' and 'text' are recognized.%0a        $BlockedMessagesFmt['ip'] = "$[IP address blocked from posting]: ";%0a        $BlockedMessagesFmt['text'] = "$[Text blocked from posting]: ";%0a%0a:$BlocklistDownload:An array of automatically-downloaded blocklists.  The keys of the array are the pages in which the blocklists should be stored, the values contain the url, format, and refresh interval for the downloaded blocklist.%0a[@        # Download the MoinMaster blocklist every twelve hours%0a        $BlocklistDownload['Site.Blocklist-MoinMaster'] = array(%0a          'url' => 'http://moinmaster.wikiwikiweb.de/BadContent?action=raw',%0a          'format' => 'regex',%0a          'refresh' => 43200);%0a        # Download a shared blocklist from pmwiki.org every day%0a        $BlocklistDownload['Site.Blocklist-Shared'] = array(%0a          'format' => 'pmwiki');%0a@]%0a%0a:$BlocklistDownloadRefresh:The default refresh interval for any $BlocklistDownload entries that don't explicitly specify a 'refresh' value.%0a        # perform automatic downloads once per week by default%0a        $BlocklistDownloadRefresh = 86400 * 7;%0a%0a:$BlocklistDownloadFmt:The format to use when saving automatically downloaded blocklists.%0a%0a%0a:$EnableBlocklistImmediate:Some cookbook recipes update pages with author input but don't use the built-in data posting routines.  If $EnableBlocklistImmediate is set (default) and the current action is listed in $BlocklistActions (below), then an immediate blocklist scan is performed on the incoming text.%0a%0a:$BlocklistActions:A list of actions for which immediate blocklist checks should be performed (see $EnableBlocklistImmediate above).%0a        # perform immediate checks for ?action=comment%0a        $BlocklistActions['comment'] = 1;%0a        # perform immediate checks for ?action=postdata%0a        $BlocklistActions['postdata'] = 1;%0a%0a%25trail%25 %3c%3c|[[Documentation Index]]|>>%0a
time=1159595880
